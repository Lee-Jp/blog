#### [202. 快乐数](https://leetcode-cn.com/problems/happy-number/)

## 题目

编写一个算法来判断一个数 n 是不是快乐数。

「快乐数」定义为：

对于一个正整数，每一次将该数替换为它每个位置上的数字的平方和。
然后重复这个过程直到这个数变为 1，也可能是 无限循环 但始终变不到 1。
如果 可以变为  1，那么这个数就是快乐数。
如果 n 是快乐数就返回 true ；不是，则返回 false 。 

**示例 1：**

```
输入：19
输出：true
解释：
1 * 1 + 9 * 9 = 82
8 * 8 + 2 * 2 = 68
6 * 6 + 8 * 8 = 100
1 * 1 + 0 * 0 + 0 * 0 = 1
```

**示例 2：**

```
输入：n = 2
输出：false
```

**提示：**

- 1 <= n <= 231 - 1

> 来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/happy-number
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。

## 解题思路

看到示例2，n为2时会返回false，那么我们可以根据这个示例来找一下规律

```js
2 * 2 = 4
4 * 4 = 16
1 * 1 + 6 * 6 = 37
3 * 3 + 7 * 7 = 58
5 * 5 + 8 * 8 = 89
8 * 8 + 9 * 9 = 145
1 * 1 + 4 * 4 + 5 * 5 = 42
4 * 4 + 2 * 2 = 20
2 * 2 + 0 * 0 = 4
```

发现没有，转了一圈，这个数有变成了4，那么这个4其实就是环的位置了，题目不清晰，对照下面的图片就明白了。

![image-20211004191640170](https://gitee.com/Lee-Jp/notes/raw/master/images/image-20211004191640170.png)

既然这个题目确定了是链表问题，其实可以按照链表中快慢指针的方法来解决，链表中的节点都有一个next节点，这个题目中我们获取这个数字的平方之和就像是获取链表的next节点，我们可以将其封装成一个getNext方法。

有了获取next节点的方法，我们就可以利用快慢指针来获取这个链表是不是有环的，当快慢指针相同时，则证明是有环的，那肯定不是一个快乐数了，同时如果在快慢指针遍历时得到数字1后，那么我们也就不用考虑数字有没有环，直接返回true即可。

## 代码实现

```js
/**
 * @param {number} n
 * @return {boolean}
 */
var isHappy = function (n) {
    let pre = n;
    let cur = getNext(n);
    // 节点不相等并且得到的数字不为1
    while (cur !== pre && cur !== 1) {
        pre = getNext(pre);
        cur = getNext(getNext(cur));
    }
    return cur === 1;
};
var getNext = function (n) {
    let sum = 0;
    while (n) {
        sum += (n % 10) ** 2;
        n = Math.floor(n / 10);
    }
    return sum;
}
```











